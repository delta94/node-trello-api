{"version":3,"sources":["../../src/middleware/verifyToken.js"],"names":["verifyToken","req","res","next","token","header","status","send","error","msg","invalid","jwt","verify","JWT_SECRET_KEY","decode","user"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,WAAW;AAAA,2FAAG,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACZC,YAAAA,KADY,GACJH,GAAG,CAACI,MAAJ,CAAW,cAAX,CADI;;AAAA,gBAEbD,KAFa;AAAA;AAAA;AAAA;;AAAA,6CAGTF,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,cAAAA,KAAK,EAAE,IADmB;AAE1BC,cAAAA,GAAG,EAAE,kCAFqB;AAG1BC,cAAAA,OAAO,EAAE;AAHiB,aAArB,CAHS;;AAAA;AAAA;AAAA;AAAA,mBAWRC,yBAAIC,MAAJ,CAAWR,KAAX,EAAkBS,sBAAlB,CAXQ;;AAAA;AAUVC,YAAAA,MAVU;AAahBb,YAAAA,GAAG,CAACc,IAAJ,GAAWD,MAAX;AACAX,YAAAA,IAAI;AAdY;AAAA;;AAAA;AAAA;AAAA;AAgBhBD,YAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,cAAAA,KAAK,EAAE,IAAT;AAAeC,cAAAA,GAAG,EAAE,eAApB;AAAqCC,cAAAA,OAAO,EAAE;AAA9C,aAArB;;AAhBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXV,WAAW;AAAA;AAAA;AAAA,GAAjB;;eAoBeA,W","sourcesContent":["import jwt from \"jsonwebtoken\";\nimport { JWT_SECRET_KEY } from \"../config/config\";\n\nconst verifyToken = async (req, res, next) => {\n  const token = req.header('x-auth-token');\n  if (!token)\n    return res.status(401).send({\n      error: true,\n      msg: 'Access denied, no token provided',\n      invalid: false\n    });\n\n  try {\n    const decode =\n      await jwt.verify(token, JWT_SECRET_KEY);\n\n    req.user = decode;\n    next();\n  } catch (ex) {\n    res.status(401).send({ error: true, msg: \"Invalid Token\", invalid: true });\n  }\n}\n\nexport default verifyToken;\n"],"file":"verifyToken.js"}